@startuml
actor EducationDepartement as ED
actor SystemAdministrator as SA
participant Interface as I
participant newYearManager as nYM
participant studentManager as  sM
database Student_DB as SDB

title = Initialisation

== Updating students'infos ==

activate I

ED -> I : openUpdateStudentInterface()
ED <- I : displayUpdateStudentInterface()

loop while !userLeft 
  
  alt updateStatus

    ED -> I : studentInterface(studentID)
    activate sM
    I -> sM : user = loadStudent(studentID)
    sM -> SDB : loadStudent(studentID)
    deactivate sM

    alt !studentExists

      ED <- I : displayMessage("The student " + studentID + "doesn't exist)

    else studentExists
      
      ED <- I : displayUpdateStudentInterface(user)
      ED -> I : updateStudent(studentInfos)
      activate sM
      I -> sM : updateStudent(studentID,studentInfos)
      sM -> SDB : updateStudent(studentID,studentInfos)
      deactivate sM
      I <- SDB : displayMessage("The student " + userID + "has been updated")
      ED <- I : displayMessage("The student " + userID + "has been updated")

    end

  end

end

deactivate I

== Migration ==

SA -> I : initYear()
I -> nYM : initYear()
nYM -> SDB : updateYear()
I <- SDB : displayMessage("The initialisation of the year is done")
SA <- I : displayMessage("The initialisation of the year is done")
@enduml
